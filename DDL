CREATE TABLE ADRESA 
    ( 
     ID_Adresa       INTEGER  NOT NULL , 
     ulice           VARCHAR2 (55)  NOT NULL , 
     cisloPopisne    VARCHAR2 (33)  NOT NULL , 
     Mesto_PSC       CHAR (5)  NOT NULL , 
     cisloOrientacni VARCHAR2 (33)  NOT NULL 
    ) 
;

ALTER TABLE ADRESA 
    ADD CONSTRAINT ADRESA_PK PRIMARY KEY ( ID_Adresa ) ;

CREATE TABLE ARCHIV 
    ( 
     ID_archiv INTEGER  NOT NULL , 
     nazev     VARCHAR2 (33)  NOT NULL , 
     popis     CLOB 
    ) 
;

ALTER TABLE ARCHIV 
    ADD CONSTRAINT ARCHIV_PK PRIMARY KEY ( ID_archiv ) ;

CREATE TABLE DODAVATEL 
    ( 
     ID_uzivatelu INTEGER  NOT NULL , 
     ID_Dodavatel INTEGER  NOT NULL , 
     firma        VARCHAR2 (100)  NOT NULL 
    ) 
;

ALTER TABLE DODAVATEL 
    ADD CONSTRAINT DODAVATEL_PK PRIMARY KEY ( ID_uzivatelu ) ;

ALTER TABLE DODAVATEL 
    ADD CONSTRAINT DODAVATEL_PKv1 UNIQUE ( ID_Dodavatel ) ;

ALTER TABLE DODAVATEL 
    ADD CONSTRAINT DODAVATEL_firma_UN UNIQUE ( firma ) ;

CREATE TABLE HOTOVOST 
    ( 
     ID_platba INTEGER  NOT NULL , 
     prijato   NUMBER (10,2)  NOT NULL , 
     vraceno   NUMBER (10,2)  NOT NULL 
    ) 
;

ALTER TABLE HOTOVOST 
    ADD CONSTRAINT HOTOVOST_PK PRIMARY KEY ( ID_platba ) ;

CREATE TABLE KARTA 
    ( 
     ID_platba  INTEGER  NOT NULL , 
     cisloKarty NUMBER  NOT NULL 
    ) 
;

ALTER TABLE KARTA 
    ADD CONSTRAINT KARTA_PK PRIMARY KEY ( ID_platba ) ;

CREATE TABLE Kategorie_zbozi 
    ( 
     ID_Kategorie INTEGER  NOT NULL , 
     nazev        VARCHAR2 (44)  NOT NULL , 
     popis        VARCHAR2 (111) 
    ) 
;

ALTER TABLE Kategorie_zbozi 
    ADD CONSTRAINT Kategorie_zbozi_PK PRIMARY KEY ( ID_Kategorie ) ;

ALTER TABLE Kategorie_zbozi 
    ADD CONSTRAINT Kategorie_zbozi_nazev_UN UNIQUE ( nazev ) ;

CREATE TABLE LOG 
    ( 
     ID_Log       INTEGER  NOT NULL , 
     tabulkaNazev VARCHAR2 (40)  NOT NULL , 
     operace      CHAR (1)  NOT NULL , 
     datumZmeny   DATE  NOT NULL , 
     idRekord     VARCHAR2 (100)  NOT NULL , 
     newData      CLOB  NOT NULL , 
     oldData      CLOB , 
     popis        CLOB 
    ) 
;

ALTER TABLE LOG 
    ADD CONSTRAINT LOG_PK PRIMARY KEY ( ID_Log ) ;

CREATE TABLE Mesto 
    ( 
     PSC   CHAR (5)  NOT NULL , 
     nazev VARCHAR2 (45)  NOT NULL , 
     kraj  VARCHAR2 (55)  NOT NULL 
    ) 
;

ALTER TABLE Mesto 
    ADD CONSTRAINT Mesto_PK PRIMARY KEY ( PSC ) ;

CREATE TABLE OBJEDNAVKA 
    ( 
     ID_Objednavky                INTEGER  NOT NULL , 
     datum                        DATE  NOT NULL , 
     OBJEDNAVKA_STATUS_ID_statusu INTEGER  NOT NULL , 
     SUPERMARKET_ID_Supermarket   INTEGER  NOT NULL , 
     typ_objednavka               VARCHAR2 (50)  NOT NULL , 
     poznamka                     CLOB , 
     ZAMESTNANEC_ID_zamestnanec   INTEGER  NOT NULL , 
     ZAKAZNIK_ID_zakaznik         NUMBER  NOT NULL , 
     DODAVATEL_ID_Dodavatel       INTEGER  NOT NULL 
    ) 
;

ALTER TABLE OBJEDNAVKA 
    ADD CONSTRAINT OBJEDNAVKA_PK PRIMARY KEY ( ID_Objednavky ) ;

CREATE TABLE OBJEDNAVKA_STATUS 
    ( 
     ID_statusu INTEGER  NOT NULL , 
     nazev      VARCHAR2 (66)  NOT NULL 
    ) 
;

ALTER TABLE OBJEDNAVKA_STATUS 
    ADD CONSTRAINT OBJEDNAVKA_STATUS_PK PRIMARY KEY ( ID_statusu ) ;

CREATE TABLE OBJEDNAVKA_ZBOZI 
    ( 
     pocet                    INTEGER  NOT NULL , 
     OBJEDNAVKA_ID_Objednavky INTEGER  NOT NULL , 
     ZBOZI_ID_Zbozi           INTEGER  NOT NULL 
    ) 
;

ALTER TABLE OBJEDNAVKA_ZBOZI 
    ADD CONSTRAINT OBJEDNAVKA_ZBOZI_PK PRIMARY KEY ( OBJEDNAVKA_ID_Objednavky, ZBOZI_ID_Zbozi ) ;

CREATE TABLE Ohlaseny 
    ( 
     ID_ohlaseny      INTEGER  NOT NULL , 
     authToken        VARCHAR2 (555)  NOT NULL , 
     konecovyBod      VARCHAR2 (444)  NOT NULL , 
     p256dh           VARCHAR2 (512)  NOT NULL , 
     ardesat          VARCHAR2 (255)  NOT NULL , 
     ZPRAVY_ID_zpravy INTEGER  NOT NULL 
    ) 
;
CREATE UNIQUE INDEX Ohlaseny__IDX ON Ohlaseny 
    ( 
     ZPRAVY_ID_zpravy ASC 
    ) 
;

ALTER TABLE Ohlaseny 
    ADD CONSTRAINT Ohlaseny_PK PRIMARY KEY ( ID_ohlaseny, ZPRAVY_ID_zpravy ) ;

CREATE TABLE PLATBA 
    ( 
     ID_platba                INTEGER  NOT NULL , 
     castka                   NUMBER (10,2)  NOT NULL , 
     datum                    DATE  NOT NULL , 
     OBJEDNAVKA_ID_Objednavky INTEGER  NOT NULL , 
     platbaTyp                CHAR (2)  NOT NULL 
    ) 
;

ALTER TABLE PLATBA 
    ADD CONSTRAINT PLATBA_PK PRIMARY KEY ( ID_platba ) ;

CREATE TABLE ROLE 
    ( 
     ID_role   INTEGER  NOT NULL , 
     nazevRole VARCHAR2 (50)  NOT NULL 
    ) 
;

ALTER TABLE ROLE 
    ADD CONSTRAINT ROLE_PK PRIMARY KEY ( ID_role ) ;

ALTER TABLE ROLE 
    ADD CONSTRAINT Key_nazev UNIQUE ( nazevRole ) ;

CREATE TABLE SKLAD 
    ( 
     ID_Skladu                  INTEGER  NOT NULL , 
     nazev                      VARCHAR2 (33)  NOT NULL , 
     kapacita                   INTEGER  NOT NULL , 
     telefonniCislo             VARCHAR2 (55)  NOT NULL , 
     SUPERMARKET_ID_Supermarket INTEGER  NOT NULL 
    ) 
;

ALTER TABLE SKLAD 
    ADD CONSTRAINT SKLAD_PK PRIMARY KEY ( ID_Skladu ) ;

ALTER TABLE SKLAD 
    ADD CONSTRAINT SKLAD_nazev_UN UNIQUE ( nazev ) ;

ALTER TABLE SKLAD 
    ADD CONSTRAINT SKLAD_ID_Supermarket_UN UNIQUE ( SUPERMARKET_ID_Supermarket ) ;

CREATE TABLE SOUBOR 
    ( 
     ID_souboru                 INTEGER  NOT NULL , 
     nazev                      VARCHAR2 (55)  NOT NULL , 
     typ                        VARCHAR2 (55)  NOT NULL , 
     pripona                    VARCHAR2 (15)  NOT NULL , 
     obsah                      BLOB  NOT NULL , 
     datumNahrani               DATE  NOT NULL , 
     datumModifikace            DATE  NOT NULL , 
     popis                      CLOB , 
     ARCHIV_ID_archiv           INTEGER  NOT NULL , 
     ZAMESTNANEC_ID_zamestnanec INTEGER  NOT NULL 
    ) 
;

ALTER TABLE SOUBOR 
    ADD CONSTRAINT SOUBOR_PK PRIMARY KEY ( ID_souboru ) ;

CREATE TABLE SUPERMARKET 
    ( 
     ID_Supermarket   INTEGER  NOT NULL , 
     nazev            VARCHAR2 (100)  NOT NULL , 
     telefon          NUMBER  NOT NULL , 
     email            VARCHAR2 (35)  NOT NULL , 
     ADRESA_ID_Adresa INTEGER  NOT NULL 
    ) 
;

ALTER TABLE SUPERMARKET 
    ADD CONSTRAINT SUPERMARKET_PK PRIMARY KEY ( ID_Supermarket ) ;

ALTER TABLE SUPERMARKET 
    ADD CONSTRAINT SUPERMARKET_nazev_UN UNIQUE ( nazev ) ;

CREATE TABLE UCTENKA 
    ( 
     popis            CLOB  NOT NULL , 
     PLATBA_ID_platba INTEGER  NOT NULL 
    ) 
;

ALTER TABLE UCTENKA 
    ADD CONSTRAINT UCTENKA_PK PRIMARY KEY ( PLATBA_ID_platba ) ;

CREATE TABLE UZIVATEL 
    ( 
     ID_uzivatelu     INTEGER  NOT NULL , 
     jmeno            VARCHAR2 (15)  NOT NULL , 
     prijmeni         VARCHAR2 (15)  NOT NULL , 
     email            VARCHAR2 (77)  NOT NULL , 
     heslo            VARCHAR2 (255)  NOT NULL , 
     telefonniCislo   VARCHAR2 (20)  NOT NULL , 
     ROLE_ID_role     INTEGER  NOT NULL , 
     ADRESA_ID_Adresa INTEGER 
    ) 
;

ALTER TABLE UZIVATEL 
    ADD CONSTRAINT UZIVATEL_PK PRIMARY KEY ( ID_uzivatelu ) ;

ALTER TABLE UZIVATEL 
    ADD CONSTRAINT Key_telefon UNIQUE ( telefonniCislo ) ;

ALTER TABLE UZIVATEL 
    ADD CONSTRAINT Key_email UNIQUE ( email ) ;

CREATE TABLE ZAKAZNIK 
    ( 
     ID_uzivatelu  INTEGER  NOT NULL , 
     ID_zakaznik   NUMBER  NOT NULL , 
     kartaVernosti VARCHAR2 (20) 
    ) 
;

ALTER TABLE ZAKAZNIK 
    ADD CONSTRAINT ZAKAZNIK_PK PRIMARY KEY ( ID_uzivatelu ) ;

ALTER TABLE ZAKAZNIK 
    ADD CONSTRAINT ZAKAZNIK_PKv1 UNIQUE ( ID_zakaznik ) ;

ALTER TABLE ZAKAZNIK 
    ADD CONSTRAINT ZAKAZNIK_kartaVernosti_UN UNIQUE ( kartaVernosti ) ;

CREATE TABLE ZAMESTNANEC 
    ( 
     ID_uzivatelu   INTEGER  NOT NULL , 
     ID_zamestnanec INTEGER  NOT NULL , 
     mzda           NUMBER (10,2)  NOT NULL , 
     datumNastupa   DATE  NOT NULL , 
     pozice         VARCHAR2 (50)  NOT NULL 
    ) 
;

ALTER TABLE ZAMESTNANEC 
    ADD CONSTRAINT ZAMESTNANEC_PK PRIMARY KEY ( ID_uzivatelu ) ;

ALTER TABLE ZAMESTNANEC 
    ADD CONSTRAINT ZAMESTNANEC_PKv1 UNIQUE ( ID_zamestnanec ) ;

CREATE TABLE ZBOZI 
    ( 
     ID_Zbozi                     INTEGER  NOT NULL , 
     nazev                        VARCHAR2 (55)  NOT NULL , 
     cena                         NUMBER (10,2)  NOT NULL , 
     mnozstvi                     INTEGER  NOT NULL , 
     minMnozstvi                  INTEGER  NOT NULL , 
     popis                        CLOB , 
     SKLAD_ID_Skladu              INTEGER  NOT NULL , 
     Kategorie_zbozi_ID_Kategorie INTEGER  NOT NULL 
    ) 
;

ALTER TABLE ZBOZI 
    ADD CONSTRAINT ZBOZI_PK PRIMARY KEY ( ID_Zbozi ) ;

ALTER TABLE ZBOZI 
    ADD CONSTRAINT ZBOZI_nazev_UN UNIQUE ( nazev ) ;

CREATE TABLE ZPRAVY 
    ( 
     ID_zpravy     INTEGER  NOT NULL , 
     odesilatel_ID INTEGER  NOT NULL , 
     prijimac_ID   INTEGER  NOT NULL , 
     zprava        CLOB  NOT NULL , 
     dataZasilani  DATE  NOT NULL 
    ) 
;

ALTER TABLE ZPRAVY 
    ADD CONSTRAINT ZPRAVY_PK PRIMARY KEY ( ID_zpravy ) ;

ALTER TABLE ADRESA 
    ADD CONSTRAINT ADRESA_Mesto_FK FOREIGN KEY 
    ( 
     Mesto_PSC
    ) 
    REFERENCES Mesto 
    ( 
     PSC
    ) 
;

ALTER TABLE DODAVATEL 
    ADD CONSTRAINT DODAVATEL_UZIVATEL_FK FOREIGN KEY 
    ( 
     ID_uzivatelu
    ) 
    REFERENCES UZIVATEL 
    ( 
     ID_uzivatelu
    ) 
;

ALTER TABLE HOTOVOST 
    ADD CONSTRAINT HOTOVOST_PLATBA_FK FOREIGN KEY 
    ( 
     ID_platba
    ) 
    REFERENCES PLATBA 
    ( 
     ID_platba
    ) 
;

ALTER TABLE KARTA 
    ADD CONSTRAINT KARTA_PLATBA_FK FOREIGN KEY 
    ( 
     ID_platba
    ) 
    REFERENCES PLATBA 
    ( 
     ID_platba
    ) 
;

ALTER TABLE OBJEDNAVKA 
    ADD CONSTRAINT OBJEDNAVKA_DODAVATEL_FK FOREIGN KEY 
    ( 
     DODAVATEL_ID_Dodavatel
    ) 
    REFERENCES DODAVATEL 
    ( 
     ID_Dodavatel
    ) 
;

ALTER TABLE OBJEDNAVKA 
    ADD CONSTRAINT OBJEDNAVKA_STATUS_FK FOREIGN KEY 
    ( 
     OBJEDNAVKA_STATUS_ID_statusu
    ) 
    REFERENCES OBJEDNAVKA_STATUS 
    ( 
     ID_statusu
    ) 
;

ALTER TABLE OBJEDNAVKA 
    ADD CONSTRAINT OBJEDNAVKA_SUPERMARKET_FK FOREIGN KEY 
    ( 
     SUPERMARKET_ID_Supermarket
    ) 
    REFERENCES SUPERMARKET 
    ( 
     ID_Supermarket
    ) 
;

ALTER TABLE OBJEDNAVKA 
    ADD CONSTRAINT OBJEDNAVKA_ZAKAZNIK_FK FOREIGN KEY 
    ( 
     ZAKAZNIK_ID_zakaznik
    ) 
    REFERENCES ZAKAZNIK 
    ( 
     ID_zakaznik
    ) 
;

ALTER TABLE OBJEDNAVKA 
    ADD CONSTRAINT OBJEDNAVKA_ZAMESTNANEC_FK FOREIGN KEY 
    ( 
     ZAMESTNANEC_ID_zamestnanec
    ) 
    REFERENCES ZAMESTNANEC 
    ( 
     ID_zamestnanec
    ) 
;

ALTER TABLE OBJEDNAVKA_ZBOZI 
    ADD CONSTRAINT OBJEDNAVKA_ZBOZI_OBJEDNAVKA_FK FOREIGN KEY 
    ( 
     OBJEDNAVKA_ID_Objednavky
    ) 
    REFERENCES OBJEDNAVKA 
    ( 
     ID_Objednavky
    ) 
;

ALTER TABLE OBJEDNAVKA_ZBOZI 
    ADD CONSTRAINT OBJEDNAVKA_ZBOZI_ZBOZI_FK FOREIGN KEY 
    ( 
     ZBOZI_ID_Zbozi
    ) 
    REFERENCES ZBOZI 
    ( 
     ID_Zbozi
    ) 
;

ALTER TABLE Ohlaseny 
    ADD CONSTRAINT Ohlaseny_ZPRAVY_FK FOREIGN KEY 
    ( 
     ZPRAVY_ID_zpravy
    ) 
    REFERENCES ZPRAVY 
    ( 
     ID_zpravy
    ) 
;

ALTER TABLE PLATBA 
    ADD CONSTRAINT PLATBA_OBJEDNAVKA_FK FOREIGN KEY 
    ( 
     OBJEDNAVKA_ID_Objednavky
    ) 
    REFERENCES OBJEDNAVKA 
    ( 
     ID_Objednavky
    ) 
;

ALTER TABLE SKLAD 
    ADD CONSTRAINT SKLAD_SUPERMARKET_FK FOREIGN KEY 
    ( 
     SUPERMARKET_ID_Supermarket
    ) 
    REFERENCES SUPERMARKET 
    ( 
     ID_Supermarket
    ) 
    ON DELETE CASCADE 
;

ALTER TABLE SOUBOR 
    ADD CONSTRAINT SOUBOR_ARCHIV_FK FOREIGN KEY 
    ( 
     ARCHIV_ID_archiv
    ) 
    REFERENCES ARCHIV 
    ( 
     ID_archiv
    ) 
;

ALTER TABLE SOUBOR 
    ADD CONSTRAINT SOUBOR_ZAMESTNANEC_FK FOREIGN KEY 
    ( 
     ZAMESTNANEC_ID_zamestnanec
    ) 
    REFERENCES ZAMESTNANEC 
    ( 
     ID_zamestnanec
    ) 
;

ALTER TABLE SUPERMARKET 
    ADD CONSTRAINT SUPERMARKET_ADRESA_FK FOREIGN KEY 
    ( 
     ADRESA_ID_Adresa
    ) 
    REFERENCES ADRESA 
    ( 
     ID_Adresa
    ) 
;

ALTER TABLE UCTENKA 
    ADD CONSTRAINT UCTENKA_PLATBA_FK FOREIGN KEY 
    ( 
     PLATBA_ID_platba
    ) 
    REFERENCES PLATBA 
    ( 
     ID_platba
    ) 
;

ALTER TABLE UZIVATEL 
    ADD CONSTRAINT UZIVATEL_ADRESA_FK FOREIGN KEY 
    ( 
     ADRESA_ID_Adresa
    ) 
    REFERENCES ADRESA 
    ( 
     ID_Adresa
    ) 
;

ALTER TABLE UZIVATEL 
    ADD CONSTRAINT UZIVATEL_ROLE_FK FOREIGN KEY 
    ( 
     ROLE_ID_role
    ) 
    REFERENCES ROLE 
    ( 
     ID_role
    ) 
;

ALTER TABLE ZAKAZNIK 
    ADD CONSTRAINT ZAKAZNIK_UZIVATEL_FK FOREIGN KEY 
    ( 
     ID_uzivatelu
    ) 
    REFERENCES UZIVATEL 
    ( 
     ID_uzivatelu
    ) 
;

ALTER TABLE ZAMESTNANEC 
    ADD CONSTRAINT ZAMESTNANEC_UZIVATEL_FK FOREIGN KEY 
    ( 
     ID_uzivatelu
    ) 
    REFERENCES UZIVATEL 
    ( 
     ID_uzivatelu
    ) 
;

ALTER TABLE ZBOZI 
    ADD CONSTRAINT ZBOZI_Kategorie_zbozi_FK FOREIGN KEY 
    ( 
     Kategorie_zbozi_ID_Kategorie
    ) 
    REFERENCES Kategorie_zbozi 
    ( 
     ID_Kategorie
    ) 
;

ALTER TABLE ZBOZI 
    ADD CONSTRAINT ZBOZI_SKLAD_FK FOREIGN KEY 
    ( 
     SKLAD_ID_Skladu
    ) 
    REFERENCES SKLAD 
    ( 
     ID_Skladu
    ) 
;

ALTER TABLE ZPRAVY 
    ADD CONSTRAINT ZPRAVY_ODESILATEL_FK FOREIGN KEY 
    ( 
     odesilatel_ID
    ) 
    REFERENCES UZIVATEL 
    ( 
     ID_uzivatelu
    ) 
;

ALTER TABLE ZPRAVY 
    ADD CONSTRAINT ZPRAVY_PRIJIMAC_FK FOREIGN KEY 
    ( 
     prijimac_ID
    ) 
    REFERENCES UZIVATEL 
    ( 
     ID_uzivatelu
    ) 
;

CREATE OR REPLACE TRIGGER ARC_FKArc_2_ZAKAZNIK 
BEFORE INSERT OR UPDATE OF ID_uzivatelu 
ON ZAKAZNIK 
FOR EACH ROW 
DECLARE 
    d INTEGER; 
BEGIN 
    SELECT A.ROLE_ID_role INTO d 
    FROM UZIVATEL A 
    WHERE A.ID_uzivatelu = :new.ID_uzivatelu; 
    IF (d IS NULL OR d <> 3) THEN 
        raise_application_error(-20223,'FK ZAKAZNIK_UZIVATEL_FK in Table ZAKAZNIK violates Arc constraint on Table UZIVATEL - discriminator column ROLE_ID_role doesn''t have value 3'); 
    END IF; 
    EXCEPTION 
    WHEN NO_DATA_FOUND THEN 
        NULL; 
    WHEN OTHERS THEN 
        RAISE; 
END; 
/

CREATE OR REPLACE TRIGGER ARC_FKArc_2_DODAVATEL 
BEFORE INSERT OR UPDATE OF ID_uzivatelu 
ON DODAVATEL 
FOR EACH ROW 
DECLARE 
    d INTEGER; 
BEGIN 
    SELECT A.ROLE_ID_role INTO d 
    FROM UZIVATEL A 
    WHERE A.ID_uzivatelu = :new.ID_uzivatelu; 
    IF (d IS NULL OR d <> 2) THEN 
        raise_application_error(-20223,'FK DODAVATEL_UZIVATEL_FK in Table DODAVATEL violates Arc constraint on Table UZIVATEL - discriminator column ROLE_ID_role doesn''t have value 2'); 
    END IF; 
    EXCEPTION 
    WHEN NO_DATA_FOUND THEN 
        NULL; 
    WHEN OTHERS THEN 
        RAISE; 
END; 
/

CREATE OR REPLACE TRIGGER ARC_FKArc_2_ZAMESTNANEC 
BEFORE INSERT OR UPDATE OF ID_uzivatelu 
ON ZAMESTNANEC 
FOR EACH ROW 
DECLARE 
    d INTEGER; 
BEGIN 
    SELECT A.ROLE_ID_role INTO d 
    FROM UZIVATEL A 
    WHERE A.ID_uzivatelu = :new.ID_uzivatelu; 
    IF (d IS NULL OR d <> 4) THEN 
        raise_application_error(-20223,'FK ZAMESTNANEC_UZIVATEL_FK in Table ZAMESTNANEC violates Arc constraint on Table UZIVATEL - discriminator column ROLE_ID_role doesn''t have value 4'); 
    END IF; 
    EXCEPTION 
    WHEN NO_DATA_FOUND THEN 
        NULL; 
    WHEN OTHERS THEN 
        RAISE; 
END; 
/

CREATE OR REPLACE TRIGGER ARC_FKArc_1_HOTOVOST 
BEFORE INSERT OR UPDATE OF ID_platba 
ON HOTOVOST 
FOR EACH ROW 
DECLARE 
    d CHAR (2); 
BEGIN 
    SELECT A.platbaTyp INTO d 
    FROM PLATBA A 
    WHERE A.ID_platba = :new.ID_platba; 
    IF (d IS NULL OR d <> 'H') THEN 
        raise_application_error(-20223,'FK HOTOVOST_PLATBA_FK in Table HOTOVOST violates Arc constraint on Table PLATBA - discriminator column platbaTyp doesn''t have value ''H'''); 
    END IF; 
    EXCEPTION 
    WHEN NO_DATA_FOUND THEN 
        NULL; 
    WHEN OTHERS THEN 
        RAISE; 
END; 
/

CREATE OR REPLACE TRIGGER ARC_FKArc_1_KARTA 
BEFORE INSERT OR UPDATE OF ID_platba 
ON KARTA 
FOR EACH ROW 
DECLARE 
    d CHAR (2); 
BEGIN 
    SELECT A.platbaTyp INTO d 
    FROM PLATBA A 
    WHERE A.ID_platba = :new.ID_platba; 
    IF (d IS NULL OR d <> 'K') THEN 
        raise_application_error(-20223,'FK KARTA_PLATBA_FK in Table KARTA violates Arc constraint on Table PLATBA - discriminator column platbaTyp doesn''t have value ''K'''); 
    END IF; 
    EXCEPTION 
    WHEN NO_DATA_FOUND THEN 
        NULL; 
    WHEN OTHERS THEN 
        RAISE; 
END; 
/
